# 定时上传管理功能说明

## 功能概述

定时上传管理页面允许用户查看和手动触发视频和字幕的上传任务。

## 页面位置

在左侧导航栏点击 **"定时上传"** 进入该页面。

## 主要功能

### 1. 视频上传队列

显示所有状态为 `200`（准备就绪）的视频：
- 视频标题和ID
- 准备完成时间
- **立即上传** 按钮：手动触发视频上传到Bilibili

### 2. 字幕上传队列

显示所有状态为 `300`（视频已上传）的视频：
- 视频标题和Bilibili链接
- 视频上传时间
- **立即上传** 按钮：手动触发字幕上传到Bilibili

### 3. 自动上传策略

系统会自动执行以下任务：
- **视频上传**：每小时自动上传1个准备就绪的视频
- **字幕上传**：视频上传完成1小时后，自动上传对应字幕

### 4. 统计信息

显示三个关键指标：
- 准备就绪的视频数量
- 等待上传字幕的视频数量
- 总待处理任务数量

## 使用方法

### 自动上传（推荐）
1. 视频处理完成后会自动进入上传队列
2. 系统每5分钟检查一次，按策略自动上传
3. 无需人工干预

### 手动上传
1. 在对应队列中找到要上传的视频
2. 点击 **"立即上传"** 按钮
3. 等待上传完成（按钮会显示"上传中..."）
4. 上传成功后任务会自动从队列移除

## 注意事项

1. **频率控制**：手动上传时请注意频率，避免触发Bilibili限流
2. **上传顺序**：必须先上传视频，再上传字幕
3. **状态同步**：上传完成后刷新页面查看最新状态
4. **错误处理**：上传失败会弹出错误提示

## API接口

### 手动上传视频
```
POST /api/v1/videos/:id/upload/video
```

### 手动上传字幕
```
POST /api/v1/videos/:id/upload/subtitle
```

## 技术实现

- 前端组件：`src/components/schedule/ScheduleManager.tsx`
- 后端接口：`internal/handler/video_handler.go`
- 调度器：`internal/chain_task/upload_scheduler.go`

## 界面截图

页面包含以下部分：
1. 顶部标题和刷新按钮
2. 自动上传策略说明（蓝色提示框）
3. 视频上传队列（紫色主题）
4. 字幕上传队列（靛蓝色主题）
5. 统计信息卡片
6. 使用说明（灰色区域）
