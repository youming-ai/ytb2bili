# 手动上传功能使用指南

## 🎯 快速开始

### 1. 查看任务队列
登录后，默认显示**任务队列**页面，可以看到：
- 各个阶段的视频数量
- 进行中的任务数
- 每30秒自动刷新

### 2. 手动上传视频

**适用场景**：
- 视频状态为"准备就绪" (200)
- 视频上传失败 (299)

**操作步骤**：
1. 进入视频详情页面
2. 右侧显示"立即上传视频"按钮
3. 点击按钮并确认
4. 等待上传完成（可以刷新查看）

### 3. 手动上传字幕

**适用场景**：
- 视频已上传 (300)
- 字幕上传失败 (399)

**操作步骤**：
1. 进入视频详情页面
2. 右侧显示"立即上传字幕"按钮
3. 点击按钮并确认
4. 等待上传完成（可以刷新查看）

## 📊 状态说明

| 状态码 | 名称 | 颜色 | 说明 | 可用操作 |
|--------|------|------|------|----------|
| 001 | 待处理 | 黄色 | 等待处理 | - |
| 002 | 处理中 | 蓝色 | 准备阶段执行中 | - |
| 200 | 准备就绪 | 绿色 | 等待上传 | ✅ 手动上传视频 |
| 201 | 上传视频中 | 紫色 | 正在上传视频 | - |
| 299 | 上传失败 | 红色 | 视频上传失败 | ✅ 重试上传视频 |
| 300 | 视频已上传 | 青色 | 等待上传字幕 | ✅ 手动上传字幕 |
| 301 | 上传字幕中 | 靛蓝色 | 正在上传字幕 | - |
| 399 | 字幕上传失败 | 橙色 | 字幕上传失败 | ✅ 重试上传字幕 |
| 400 | 全部完成 | 翠绿色 | 所有任务完成 | - |
| 999 | 任务失败 | 红色 | 准备阶段失败 | - |

## ⚠️ 重要提示

1. **手动上传会打断定时队列**：建议只在紧急情况下使用
2. **异步执行**：上传任务在后台执行，需要刷新页面查看结果
3. **状态限制**：只有特定状态的视频才能执行手动操作
4. **字幕上传前提**：必须先成功上传视频

## 💡 定时上传策略

系统默认采用定时上传策略：
- ⏰ **视频上传**：每小时自动上传一个准备好的视频
- ⏰ **字幕上传**：视频上传成功后1小时自动上传字幕
- 🔍 **检查频率**：每5分钟检查一次

## 🔧 故障排查

### 问题1：无法看到上传按钮
**原因**：视频状态不符合要求  
**解决**：检查视频当前状态，只有特定状态才显示按钮

### 问题2：上传失败
**原因**：网络问题或认证失效  
**解决**：
1. 检查网络连接
2. 检查Bilibili登录状态
3. 查看后端日志排查问题

### 问题3：状态一直显示"上传中"
**原因**：后台任务执行时间较长  
**解决**：
1. 等待几分钟后刷新
2. 检查后端日志确认任务状态

## 📞 获取帮助

- 查看详细文档：[MANUAL_UPLOAD_FEATURE.md](./MANUAL_UPLOAD_FEATURE.md)
- 查看任务状态码：`bili-up-api/docs/任务状态码说明.md`
- 查看后端日志：`bili-up-api/logs/app.log`
